# å¼€å‘è®°å½•

## macOS åº”ç”¨åˆ†å‘ç­–ç•¥

### æ–¹å¼ä¸€ï¼šç›´æ¥æ„å»ºè¿è¡Œï¼ˆå¼€å‘è°ƒè¯•ï¼‰

1. ç”¨ Xcode æ‰“å¼€ `Light Stats/Light Stats.xcodeproj`
2. é€‰æ‹©ç›®æ ‡è®¾å¤‡ä¸º "My Mac"
3. æŒ‰ `Cmd + R` è¿è¡Œ

### æ–¹å¼äºŒï¼šæ„å»ºåæ‹·è´ .appï¼ˆæœ¬æœºä½¿ç”¨ï¼‰

1. åœ¨ Xcode ä¸­æŒ‰ `Cmd + B` æ„å»ºé¡¹ç›®
2. åœ¨å·¦ä¾§ Navigator æ‰¾åˆ° **Products** æ–‡ä»¶å¤¹
3. å³é”®ç‚¹å‡» `Light Stats.app` â†’ **Show in Finder**
4. å°† `.app` æ–‡ä»¶æ‹·è´åˆ° `/Applications` ç›®å½•

### æ–¹å¼ä¸‰ï¼šArchive å¯¼å‡ºï¼ˆæ­£å¼åˆ†å‘ï¼‰

1. **Xcode èœå•**: Product â†’ Archive
2. ç­‰å¾… Archive å®Œæˆåï¼ŒOrganizer çª—å£ä¼šè‡ªåŠ¨æ‰“å¼€
3. é€‰æ‹©åˆšåˆ›å»ºçš„ Archiveï¼Œç‚¹å‡» **Distribute App**
4. é€‰æ‹©åˆ†å‘æ–¹å¼ï¼š
   - **Developer ID** - ç”¨å¼€å‘è€…è¯ä¹¦ç­¾åï¼ˆå¯åˆ†å‘ç»™å…¶ä»–äººï¼‰
   - **App Store Connect** - æäº¤åˆ° Mac App Store

### å‘½ä»¤è¡Œæ„å»º

#### æ–¹æ¡ˆä¸€ï¼šç›´æ¥æ„å»º Appï¼ˆå¼€å‘æµ‹è¯•ï¼‰

# 1. è®¾ç½® Xcode å¼€å‘è€…ç›®å½•ï¼ˆå¦‚æœæœªè®¾ç½®ï¼‰

sudo xcode-select -s /Applications/Xcode.app/Contents/Developer

# 2. æ¸…ç†æ„å»ºç¼“å­˜

xcodebuild clean -project "Light Stats.xcodeproj" -scheme "Light Stats"

# 3. ç›´æ¥æ„å»ºï¼ˆä¸ç­¾åï¼‰

xcodebuild build \
  -project "Light Stats.xcodeproj" \
  -scheme "Light Stats" \
  -configuration Release \
  -derivedDataPath build/DerivedData \
  CODE_SIGN_IDENTITY="" \
  CODE_SIGNING_REQUIRED=NO \
  CODE_SIGNING_ALLOWED=NO

# 4. æ‹·è´åˆ°åº”ç”¨ç¨‹åºç›®å½•

cp -R "build/DerivedData/Build/Products/Release/Light Stats.app" /Applications/

**è¾“å‡ºä½ç½®**: `build/DerivedData/Build/Products/Release/Light Stats.app`

#### æ–¹æ¡ˆäºŒï¼šArchive åå¯¼å‡ºï¼ˆæ­£å¼åˆ†å‘ï¼‰

# 1. è®¾ç½® Xcode å¼€å‘è€…ç›®å½•

sudo xcode-select -s /Applications/Xcode.app/Contents/Developer

# 2. åˆ›å»º Archive

xcodebuild archive \
  -project "Light Stats.xcodeproj" \
  -scheme "Light Stats" \
  -configuration Release \
  -archivePath "build/Light Stats.xcarchive" \
  CODE_SIGN_IDENTITY="" \
  CODE_SIGNING_REQUIRED=NO

# 3. åˆ›å»ºå¯¼å‡ºé…ç½®æ–‡ä»¶

cat > /tmp/export_options.plist << 'EOF'
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>method</key>
    <string>mac-application</string>
    <key>signingStyle</key>
    <string>manual</string>
    <key>stripSwiftSymbols</key>
    <true/>
</dict>
</plist>
EOF

# 4. å¯¼å‡º App

xcodebuild -exportArchive \
  -archivePath "build/Light Stats.xcarchive" \
  -exportOptionsPlist /tmp/export_options.plist \
  -exportPath build/output

# 5. æ‹·è´åˆ°åº”ç”¨ç¨‹åºç›®å½•

cp -R "build/output/Light Stats.app" /Applications/

**è¾“å‡ºä½ç½®**: `build/output/Light Stats.app`

#### æ–¹æ¡ˆä¸‰ï¼šä¸€é”®æ„å»ºè„šæœ¬

åˆ›å»º `build.sh` è„šæœ¬ï¼š

# !/bin/bash
set -e

PROJECT="Light Stats.xcodeproj"
SCHEME="Light Stats"
BUILD_DIR="build"
OUTPUT_DIR="$BUILD_DIR/output"

echo "ğŸ§¹ æ¸…ç†æ—§æ„å»º..."
rm -rf "$BUILD_DIR"

echo "ğŸ”¨ å¼€å§‹æ„å»º..."
xcodebuild build \
  -project "$PROJECT" \
  -scheme "$SCHEME" \
  -configuration Release \
  -derivedDataPath "$BUILD_DIR/DerivedData" \
  CODE_SIGN_IDENTITY="" \
  CODE_SIGNING_REQUIRED=NO \
  CODE_SIGNING_ALLOWED=NO

echo "ğŸ“¦ å‡†å¤‡è¾“å‡ºç›®å½•..."
mkdir -p "$OUTPUT_DIR"
cp -R "$BUILD_DIR/DerivedData/Build/Products/Release/Light Stats.app" "$OUTPUT_DIR/"

echo "âœ… æ„å»ºå®Œæˆï¼"
echo "ğŸ“ è¾“å‡ºä½ç½®: $OUTPUT_DIR/Light Stats.app"
echo ""
echo "å®‰è£…åˆ° Applications ç›®å½•ï¼š"
echo "  cp -R \"$OUTPUT_DIR/Light Stats.app\" /Applications/"

è¿è¡Œè„šæœ¬ï¼š
chmod +x build.sh
./build.sh

### å®‰å…¨æç¤ºå¤„ç†

å¦‚æœé‡åˆ°"æ— æ³•æ‰“å¼€ï¼Œå› ä¸ºæ— æ³•éªŒè¯å¼€å‘è€…"çš„æç¤ºï¼š

- å³é”®ç‚¹å‡» app â†’ é€‰æ‹©"æ‰“å¼€" â†’ ç¡®è®¤æ‰“å¼€
- æˆ–åœ¨ **ç³»ç»Ÿè®¾ç½® â†’ éšç§ä¸å®‰å…¨æ€§** ä¸­ç‚¹å‡»"ä»è¦æ‰“å¼€"

---

## åº”ç”¨å›¾æ ‡é…ç½®ç”Ÿæˆ

### æ³¨æ„äº‹é¡¹

- å›¾æ ‡æ–‡ä»¶å¿…é¡»æ˜¯ PNG æ ¼å¼
- ç¡®ä¿ `Contents.json` ä¸­æ¯ä¸ªæ¡ç›®éƒ½æœ‰ `filename` å­—æ®µ
- ä¿®æ”¹å›¾æ ‡åéœ€è¦ Clean Buildï¼ˆ`Cmd + Shift + K`ï¼‰å†é‡æ–°æ„å»º
- iOS é…ç½®ï¼ˆ`platform: "ios"`ï¼‰å¯¹ macOS åº”ç”¨æ— æ•ˆï¼Œéœ€è¦ä½¿ç”¨ `idiom: "mac"`

### åœ¨çº¿å·¥å…·

å¦‚éœ€ç”Ÿæˆå®Œæ•´å°ºå¯¸çš„å›¾æ ‡é›†ï¼Œå¯ä½¿ç”¨ï¼š

- [appicon.co](https://appicon.co/)
- [makeappicon.com](https://makeappicon.com/)

ä¸Šä¼  1024px å›¾æ ‡ï¼Œé€‰æ‹© macOS å¹³å°ï¼Œä¸€é”®ç”Ÿæˆæ‰€æœ‰å°ºå¯¸ã€‚

### è„šæœ¬ç”Ÿæˆ

```bash
cd /Users/actor/Documents/code/menus-stats/Light Stats/Light Stats/Assets.xcassets/AppIcon.appiconset

# å‡è®¾ä½ çš„åŸå›¾å« icon_1024.png
SOURCE="StatusIcon.png"

# ç”Ÿæˆå„å°ºå¯¸
sips -z 16 16 "$SOURCE" --out icon_16.png
sips -z 32 32 "$SOURCE" --out icon_32.png
sips -z 64 64 "$SOURCE" --out icon_64.png
sips -z 128 128 "$SOURCE" --out icon_128.png
sips -z 256 256 "$SOURCE" --out icon_256.png
sips -z 512 512 "$SOURCE" --out icon_512.png
sips -z 1024 1024 "$SOURCE" --out icon_1024.png
```
